- # Parameters:
- # widget MiqWidget object
- wp = WidgetPresenter.new(self, session, @sb, widget)
%div{:id => "w_#{widget.id}"}
  #test.modbox
    %h2.modtitle{:style => "cursor:move"}
      %a{:class => "#{widget.content_type}box"}
      - if role_allows(:feature => "dashboard_add")
        = wp.button_close
      = wp.button_minmax
      - if ["report","chart"].include?(widget.content_type) &&
      - !widget.contents_for_user(session[:userid]).blank?
        = wp.button_fullscreen
        = wp.button_pdf
      - if ["chart"].include?(widget.content_type) &&
      - !widget.contents_for_user(session[:userid]).blank?
        = wp.button_zoom
      %div
        %span.modtitle_text= h(widget.title)
    - if widget.content_type == "menu"
      = render :partial => 'widget_menu', :locals => {:widget => widget}
    - elsif widget.contents_for_user(session[:userid]).blank?
      = render(:partial => 'widget_blank', :locals => {:widget => widget})
    - elsif ["report", "chart", "rss"].include?(widget.content_type)
      = render :partial => "widget_#{widget.content_type}", :locals => {:widget => widget}
    - unless widget.content_type == "menu"
      = render(:partial => 'widget_footer', :locals => {:widget => widget})
